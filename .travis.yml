language: python
python:
  - '2.6'
  - '2.7'
install:
  - pip install -r requirements.txt
  - pip install pylint
  - pip install pyflakes
  - pip install pep8
script:
  - pep8 headphones
  - pyflakes headphones
before_deploy:
  - pip install -r requirements.txt -t lib/
  - find . -name "*.pyc" -delete
  - find ./lib/ -path "*/*\-info/*" -delete
  - zip -r -9 headphones.zip data/ headphones/ init-scripts/ lib/ Headphones.py
deploy:
  provider: releases
  api_key:
    secure: <GITHUB OATH TOKEN HERE>
  file: headphones.zip
  on:
    tags: true
