<%def name="OptionString(o, parent=None)">
<%
    uiname = o.uiId()
    embed_id = uiname + '_embed'

    size_attr = '' if o.maxlength is None else ' size="%d"' % o.maxlength
    tooltip_attr = '' if o.tooltip is None else ' title="%s"' % o.tooltip
%>
    <div class="row">
        %if o.label is not None:
            <label ${tooltip_attr} for="${uiname}">
                ${o.label}
            </label>
        %endif

        %if o.writable:
            <input type="text" id="${uiname}" name="${uiname}" value="${o.value}" ${size_attr} />
        %else:
            <span id="${uiname}" name="${uiname}">${o.value}</span>
        %endif

        %if o.caption is not None:
            <small>${o.caption}</small>
        %endif
    </div>

    % if 0 < len(o):
        <div id="${embed_id}">
            % for option in o:
                ${option.render()}
            % endfor    # for option in block
        </div>
    % endif
</%def>


<%def name="OptionPassword(o, parent=None)">
<%
    uiname = o.uiId()

    size_attr = '' if o.maxlength is None else ' size="%d"' % o.maxlength
    tooltip_attr = '' if o.tooltip is None else ' title="%s"' % o.tooltip
%>
    <div class="row">
        %if o.label is not None:
            <label ${tooltip_attr} for="${uiname}">
                ${o.label}
            </label>
        %endif

        %if o.writable:
            <input type="password" id="${uiname}" name="${uiname}" value="${o.value}" ${size_attr} />
        %else:
            <span id="${uiname}" name="${uiname}">${'*' * len(o.value)}</span>
        %endif

        %if o.caption is not None:
            <small>${o.caption}</small>
        %endif
    </div>
</%def>


<%def name="OptionNumber(o, parent=None)">
<%
    uiname = o.uiId()

    min_attr = '' if o.minvalue is None else ' min="%d"' % o.minvalue
    max_attr = '' if o.maxvalue is None else ' size="%d"' % o.maxvalue
    tooltip_attr = '' if o.tooltip is None else ' title="%s"' % o.tooltip
%>
    <div class="row">
        %if o.label is not None:
            <label ${tooltip_attr} for="${uiname}">
                ${o.label}
            </label>
        %endif

        <input type="number" id="${uiname}" name="${uiname}" value="${o.value}" ${min_attr} ${max_attr} />

        %if o.caption is not None:
            <small>${o.caption}</small>
        %endif
    </div>
</%def>


<%def name="OptionBool(o, parent=None)">
<%
    uiname = o.uiId()

    tooltip_attr = '' if o.tooltip is None else ' title="%s"' % o.tooltip
    checked_attr = 'checked' if o.value else ''
%>
    <div class="row checkbox">
        %if o.label is not None:
            <label ${tooltip_attr} for="${uiname}">
                ${o.label}
            </label>
        %endif

        <input type="checkbox" id="${uiname}" name="${uiname}" value="1" ${checked_attr} />

        %if o.caption is not None:
            <small>${o.caption}</small>
        %endif
    </div>
</%def>


<%def name="OptionSwitch(o, parent=None)">
<%
    uiname = o.uiId()
    embed_id = uiname + '_embed'

    tooltip_attr = '' if o.tooltip is None else ' title="%s"' % o.tooltip
    checked_attr = 'checked' if o.value else ''
%>
    <div class="row checkbox">
        %if o.label is not None:
            <label ${tooltip_attr} for="${uiname}">
                ${o.label}
            </label>
        %endif

        <input class="hp-option-switch" type="checkbox" id="${uiname}" name="${uiname}" data-div="#${embed_id}" value="1" ${checked_attr} />

        %if o.caption is not None:
            <small>${o.caption}</small>
        %endif
    </div>

    % if 0 < len(o):
        <div id="${embed_id}">
            % for option in o:
                ${option.render()}
            % endfor    # for option in block
        </div>
    % endif
</%def>


<%def name="ApiKeyOptionExtension(o, parent=None)">
<%
    ext = o
    o = parent
    uiname = o.uiId()
    embed_id = uiname + '_embed'
    button_class = embed_id + '-btn-cls'
%>
<div>
    <button type="button" class="${button_class}">${_('Generate')}</button>
    <small>${ext.caption}<strong>${o.value}</strong></small>
</div>
<script type="text/javascript" language="javascript">
    $('#${uiname}').click(function(){ $('#${uiname}').select() });
    $(".${button_class}").click(function(){
        $.get('generateAPI',
            function(data){
                if (data.error != undefined) {
                    alert(data.error);
                    return;
                }
                $('#${uiname}').val(data);
        });
    });
</script>
</%def>
